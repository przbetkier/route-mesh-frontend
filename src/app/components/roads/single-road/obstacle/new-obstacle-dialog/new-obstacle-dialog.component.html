<div id="close-obstacle-dialog-wrapper">
  <mat-icon (click)="dialogRef.close()">close</mat-icon>
</div>

<div class="container obstacle-form">
  <div class="roads-form">

    <h4>Add new obstacle for road {{roadName}}</h4>
    <form [formGroup]="formGroup" #formDirective="ngForm" (ngSubmit)="addObstacle(formDirective)">
      <div class="form-container">
        <div class="row">
          <!-- DEFAULT OBSTACLE PARAMS -->

          <!-- LEFT-->
          <div class="col-6">
            <div class="row">
              <div class="col-12">
                <mat-form-field>
                  <input matInput formControlName="name" required>
                  <mat-placeholder>Name</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <input matInput formControlName="city" required>
                  <mat-placeholder>City</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <input matInput type="number" formControlName="latitude" required>
                  <mat-placeholder>Latitude</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <input matInput type="number" formControlName="longitude" required>
                  <mat-placeholder>Longitude</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <mat-label>Immovable</mat-label>
                  <select matNativeControl required formControlName="immovable">
                    <option value="{{true}}">Yes</option>
                    <option value="{{false}}">No</option>
                  </select>
                </mat-form-field>
              </div>
            </div>
          </div>
          <!-- RIGHT -->
          <div class="col-6">
            <div class="row">
              <div class="col-12">
                <mat-form-field>
                  <input matInput formControlName="milestone" required>
                  <mat-placeholder>Milestone</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <input matInput formControlName="url" required>
                  <mat-placeholder>Url</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <input matInput formControlName="comment" required>
                  <mat-placeholder>Comment</mat-placeholder>
                </mat-form-field>
              </div>
              <div class="col-12">
                <mat-form-field>
                  <mat-label>Obstacle type</mat-label>
                  <select matNativeControl required formControlName="obstacleType">
                    <option *ngFor="let type of obstacleTypes" value="{{type}}">{{type}}</option>
                  </select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>

        <!-- HEIGHT OBSTACLE PARAMS -->
        <div class="row" *ngIf="obstacleType.value === 'HEIGHT'">
          <div class="col-6">
            <mat-form-field>
              <mat-label>Height type</mat-label>
              <select matNativeControl required formControlName="heightObstacleType">
                <option *ngFor="let type of heightObstacleTypes" value="{{type}}">{{type}}</option>
              </select>
            </mat-form-field>
          </div>
          <div class="col-6">
            <mat-form-field>
              <input matInput type="number" formControlName="limit" required>
              <mat-placeholder>Limit</mat-placeholder>
            </mat-form-field>
          </div>
          <div class="col-6">
            <mat-form-field>
              <mat-label>Profile</mat-label>
              <select matNativeControl required formControlName="heightProfile">
                <option *ngFor="let profile of heightObstacleProfiles" value="{{profile}}">{{profile}}</option>
              </select>
            </mat-form-field>
          </div>
          <div class="col-6">
            <mat-form-field>
              <input matInput type="number" formControlName="range" required>
              <mat-placeholder>Range</mat-placeholder>
            </mat-form-field>
          </div>
        </div>

      </div>
      <!-- ACTION BUTTONS-->
      <div class="row">
        <div class="col-12 button-section">
          <button mat-raised-button color="primary" type="submit" [disabled]="!isFormValid()">Add obstacle</button>
        </div>
      </div>
    </form>
  </div>
</div>
